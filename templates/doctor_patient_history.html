{% extends "base.html" %}
{% block content %}
<a href="{{ url_for('doctor_dashboard') }}" class="btn btn-link text-decoration-none mb-3">← Back to Dashboard</a>
<div class="card border-0 shadow-sm">
  <div class="card-body">
    <h2 class="h4 mb-1">{{ patient.user.full_name }}</h2>
    <p class="text-muted mb-4">History with Dr. {{ doctor.user.full_name }}</p>
    <div class="table-responsive">
      <table class="table align-middle">
        <thead>
          <tr>
            <th>Date</th>
            <th>Status</th>
            <th>Diagnosis</th>
            <th>Prescription</th>
          </tr>
        </thead>
        <tbody>
          {% for appointment in history %}
          <tr>
            <td>{{ appointment.appointment_date.strftime('%b %d, %Y') }}</td>
            <td>{{ appointment.status.value }}</td>
            <td>{{ appointment.treatment_note.diagnosis if appointment.treatment_note else "—" }}</td>
            <td>{{ appointment.treatment_note.prescription if appointment.treatment_note else "—" }}</td>
          </tr>
          {% else %}
          <tr>
            <td colspan="4" class="text-center text-muted">No visit history yet.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}

